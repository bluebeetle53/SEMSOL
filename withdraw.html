<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dexmira - Withdraw Funds</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #6c5ce7;
        --primary-dark: #5649c0;
        --secondary: #00cec9;
        --accent: #fd79a8;
        --light: #f8f9fa;
        --dark: #2d3436;
        --success: #00b894;
        --warning: #fdcb6e;
        --danger: #d63031;
        --gray: #dfe6e9;
        --dark-gray: #636e72;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        color: var(--dark);
        line-height: 1.6;
      }

      .container {
        width: 95%;
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 0;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
      }

      .logo-text {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary);
      }

      .back-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        color: var(--primary);
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .back-btn:hover {
        transform: translateX(-5px);
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 2rem;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 150px;
        height: 150px;
        background: linear-gradient(
          135deg,
          rgba(108, 92, 231, 0.1) 0%,
          rgba(0, 206, 201, 0.1) 100%
        );
        border-radius: 0 0 0 100%;
        z-index: 0;
      }

      .card-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 1.5rem;
        position: relative;
        z-index: 1;
      }

      .card-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 0;
        width: 50px;
        height: 3px;
        background: var(--accent);
        border-radius: 3px;
      }

      .form-group {
        margin-bottom: 1.5rem;
        position: relative;
        z-index: 1;
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--dark);
      }

      .form-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: #f9f9f9;
      }

      .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
        background: white;
      }

      .input-icon {
        position: relative;
      }

      .input-icon i {
        position: absolute;
        top: 50%;
        right: 15px;
        transform: translateY(-50%);
        color: var(--primary);
      }

      .btn {
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
      }

      .btn-block {
        display: block;
        width: 100%;
      }

      .balance-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(245, 245, 245, 0.7);
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
      }

      .balance-label {
        font-weight: 500;
      }

      .balance-amount {
        font-weight: 700;
        color: var(--success);
      }

      /* Notification styles */
      .notification {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        z-index: 101;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        max-width: 90%;
        width: 400px;
        text-align: center;
      }

      .notification.active {
        opacity: 1;
        pointer-events: all;
        transform: translate(-50%, -50%) scale(1);
      }

      .notification-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        margin: 0 auto 1.5rem;
      }

      .notification-icon.success {
        background: rgba(0, 184, 148, 0.1);
        color: var(--success);
      }

      .notification-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .notification-text {
        color: var(--dark-gray);
        margin-bottom: 1.5rem;
      }

      .notification-btn {
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .notification-btn.success {
        background: var(--success);
        color: white;
      }

      .notification-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .task-link {
        display: inline-block;
        margin-top: 1rem;
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .task-link:hover {
        color: var(--primary-dark);
        text-decoration: underline;
      }

      /* Overlay */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 100;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .overlay.active {
        opacity: 1;
        pointer-events: all;
      }

      /* Loader styles */
      .loader-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .loader-container.active {
        opacity: 1;
        pointer-events: all;
      }

      .loader {
        width: 80px;
        height: 80px;
        margin-bottom: 1.5rem;
      }

      .loader-circle {
        fill: none;
        stroke: var(--primary);
        stroke-width: 6;
        stroke-linecap: round;
        stroke-dasharray: 200;
        stroke-dashoffset: 0;
        animation: dash 1.5s ease-in-out infinite;
        transform-origin: center;
      }

      @keyframes dash {
        0% {
          stroke-dashoffset: 200;
          transform: rotate(0deg);
        }
        50% {
          stroke-dashoffset: 50;
          transform: rotate(180deg);
        }
        100% {
          stroke-dashoffset: 200;
          transform: rotate(360deg);
        }
      }

      .loader-text {
        font-size: 1.25rem;
        font-weight: 500;
        color: var(--primary);
        margin-top: 1rem;
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .container {
          width: 100%;
          padding: 1rem;
        }

        .card {
          padding: 1.5rem;
        }

        .card-title {
          font-size: 1.5rem;
        }
      }

      @media (max-width: 480px) {
        header {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .notification {
          width: 90%;
          padding: 1.5rem;
        }

        .notification-icon {
          width: 60px;
          height: 60px;
          font-size: 2rem;
        }

        .notification-title {
          font-size: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo">
          <div class="logo-icon">D</div>
          <div class="logo-text">Dexmira</div>
        </div>
        <a href="dashboard.html" class="back-btn">
          <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
      </header>

      <div class="card">
        <h2 class="card-title">Withdraw Funds</h2>

        <div class="balance-info">
          <span class="balance-label">Available Balance:</span>
          <span class="balance-amount" id="user-balance">NGN 0.00</span>
        </div>

        <form id="withdrawal-form">
          <div class="form-group">
            <label for="account-name" class="form-label">Account Name</label>
            <input
              type="text"
              id="account-name"
              class="form-input"
              placeholder="Enter account name"
              required
            />
          </div>

          <div class="form-group">
            <label for="account-number" class="form-label"
              >Account Number</label
            >
            <div class="input-icon">
              <input
                type="text"
                id="account-number"
                class="form-input"
                placeholder="Enter account number"
                required
              />
              <i class="fas fa-wallet"></i>
            </div>
          </div>

          <div class="form-group">
            <label for="bank-name" class="form-label">Bank Name</label>
            <select id="bank-name" class="form-input" required>
              <option value="" disabled selected>Select your bank</option>
              <option value="Access Bank">Access Bank</option>
              <option value="Citibank">Citibank</option>
              <option value="Ecobank">Ecobank</option>
              <option value="Fidelity Bank">Fidelity Bank</option>
              <option value="First Bank">First Bank</option>
              <option value="GTBank">GTBank</option>
              <option value="Heritage Bank">Heritage Bank</option>
              <option value="Keystone Bank">Keystone Bank</option>
              <option value="Polaris Bank">Polaris Bank</option>
              <option value="Stanbic IBTC">Stanbic IBTC</option>
              <option value="Standard Chartered">Standard Chartered</option>
              <option value="Sterling Bank">Sterling Bank</option>
              <option value="Union Bank">Union Bank</option>
              <option value="United Bank for Africa">
                United Bank for Africa
              </option>
              <option value="Unity Bank">Unity Bank</option>
              <option value="Wema Bank">Wema Bank</option>
              <option value="Zenith Bank">Zenith Bank</option>
              <option value="Palmpay">Palmpay</option>
              <option value="Opay">Opay</option>
              <option value="Kuda">Kuda</option>
              <option value="Moniepoint">Moniepoint</option>
            </select>
          </div>

          <div class="form-group">
            <label for="amount" class="form-label">Amount (NGN)</label>
            <div class="input-icon">
              <input
                type="number"
                id="amount"
                class="form-input"
                placeholder="Enter amount"
                min="1000"
                required
              />
              <i class="fas fa-money-bill-wave"></i>
            </div>
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            <i class="fas fa-paper-plane"></i> Proceed Withdrawal
          </button>
        </form>
      </div>
    </div>

    <!-- Success Notification -->
    <div class="notification" id="success-notification">
      <div class="notification-icon success">
        <i class="fas fa-check-circle"></i>
      </div>
      <h3 class="notification-title">Withdrawal Initiated!</h3>
      <p class="notification-text">
        Your withdrawal request has been submitted successfully and is being
        processed.
      </p>
      <p class="notification-text">
        To get your withdrawal approved, please complete tasks on the tasks
        page.
      </p>
      <a href="task.html" class="task-link">
        <i class="fas fa-arrow-right"></i> CLICK HERE to complete tasks
      </a>
      <button class="notification-btn success" id="success-btn">
        Continue to Dashboard
      </button>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Loader -->
    <div class="loader-container" id="loader">
      <svg class="loader" viewBox="0 0 100 100">
        <circle class="loader-circle" cx="50" cy="50" r="40" />
      </svg>
      <div class="loader-text">Processing withdrawal...</div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get current user from localStorage
        const currentUser = JSON.parse(
          localStorage.getItem("dexmira_current_user")
        ) || {
          username: "User",
          phone: "00000000000",
          balance: 0,
        };

        // Update balance in the UI
        document.getElementById(
          "user-balance"
        ).textContent = `NGN ${currentUser.balance.toLocaleString()}`;

        // Form submission handler
        const withdrawalForm = document.getElementById("withdrawal-form");
        const loader = document.getElementById("loader");
        const successNotification = document.getElementById(
          "success-notification"
        );
        const overlay = document.getElementById("overlay");
        const successBtn = document.getElementById("success-btn");

        withdrawalForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Get form values
          const accountName = document.getElementById("account-name").value;
          const accountNumber = document.getElementById("account-number").value;
          const bankName = document.getElementById("bank-name").value;
          const amount = parseFloat(document.getElementById("amount").value);

          // Validate amount
          if (amount < 1000) {
            alert("Minimum withdrawal amount is NGN 1,000");
            return;
          }

          if (amount > currentUser.balance) {
            alert("Insufficient balance for this withdrawal");
            return;
          }

          // Show loader
          loader.classList.add("active");

          // Simulate processing delay
          setTimeout(() => {
            // Save withdrawal to history
            saveWithdrawalHistory(accountName, accountNumber, bankName, amount);

            // Hide loader
            loader.classList.remove("active");

            // Show success notification
            successNotification.classList.add("active");
            overlay.classList.add("active");
          }, 2000);
        });

        // Save withdrawal history to localStorage
        function saveWithdrawalHistory(
          accountName,
          accountNumber,
          bankName,
          amount
        ) {
          const withdrawalHistory =
            JSON.parse(localStorage.getItem("dexmira_withdrawal_history")) ||
            [];

          const withdrawal = {
            accountName: accountName,
            accountNumber: accountNumber,
            bankName: bankName,
            amount: amount,
            timestamp: new Date().toISOString(),
            status: "pending",
            userId: currentUser.phone || currentUser.username,
          };

          withdrawalHistory.push(withdrawal);
          localStorage.setItem(
            "dexmira_withdrawal_history",
            JSON.stringify(withdrawalHistory)
          );
        }

        // Success button handler
        successBtn.addEventListener("click", function () {
          successNotification.classList.remove("active");
          overlay.classList.remove("active");
          window.location.href = "dashboard.html";
        });
      });
    </script>
  </body>
</html>
